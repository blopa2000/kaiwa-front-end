<div class="p-3 border-b relative">
  <input
    type="text"
    [formControl]="searchControl"
    placeholder="Buscar usuarios"
    class="w-full px-4 py-2 rounded-lg bg-gray-100 focus:outline-none"
  />

  @if (loading()) {
    <div class="absolute top-full left-0 w-full bg-white p-3 text-sm text-gray-400">
      Buscando...
    </div>
  }

  @if (!loading() && results().length > 0) {
    <div
      class="absolute top-full left-0 w-full bg-white shadow rounded z-10 max-h-64 overflow-y-auto"
    >
      @for (user of results(); track user.id) {
        <div class="p-3 hover:bg-gray-100 cursor-pointer" (click)="selectUser(user)">
          <div class="font-medium">
            {{ user.username }}
          </div>
          <div class="text-xs text-gray-500">{{ user.first_name }} {{ user.last_name }}</div>
        </div>
      }
    </div>
  }

  @if (!loading() && queryLength >= 2 && results().length === 0) {
    <div class="absolute top-full left-0 w-full bg-white p-3 text-sm text-gray-400">
      No se encontraron usuarios
    </div>
  }
</div>
