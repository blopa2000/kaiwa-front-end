<div class="flex-1 overflow-y-auto">
  @if (rooms.length === 0) {
    <div class="text-center text-gray-400 p-6">No tienes conversaciones aún</div>
  } @else {
    @for (room of rooms; track room.id) {
      <div
        class="p-4 border-b hover:bg-gray-100 cursor-pointer flex items-center gap-3"
        (click)="select(room)"
      >
        <!-- Foto del usuario -->
        <img
          [src]="room.other_user?.photo || 'avatar.svg'"
          alt="avatar"
          class="w-10 h-10 rounded-full object-cover"
        />

        <!-- Contenido -->
        <div class="flex-1 min-w-0">
          <div class="font-medium">
            {{ room.other_user?.username || 'Desconocido' }}
          </div>

          <div class="text-sm text-gray-500 truncate">
            {{ room.last_message?.content || 'Sin mensajes' }}
          </div>
        </div>

        <!-- Indicador no leído -->
        @if (
          room.last_message &&
          room.last_message.read_at === null &&
          room.last_message.sender_id !== currentUserId
        ) {
          <div class="w-2.5 h-2.5 bg-green-500 rounded-full"></div>
        }
      </div>
    }
  }
</div>
